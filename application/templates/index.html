<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Video Translator</title>
  <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>

<body>
  <section>
    <div class="row justify-content-center">
      <div class="col mt-4">
        <h3 align="center" class="display-3">VIDEO TRANSLATOR</h3>
      </div>
    </div>
    <div class="row justify-content-center">
      <div class="col col-md-4 mt-5">
        <form method="POST" enctype="multipart/form-data" id="mainform" name="mainform">
          <div class="mb-3">
            <label for="formFileLg" class="form-label">Please upload video before proceeding</label>
            <input class="form-control form-control-lg" type="file" accept="video/mp4" name="videofile" id="videofile">
          </div>
          <div class="mb-3">
            <select class="form-select" name="languages" id="languages" aria-label="Default select example">
              <option selected>Choose language to translate to</option>
              <option value="af">afrikaans</option>
              <option value="sq">albanian</option>
              <option value="am">amharic</option>
              <option value="ar">arabic</option>
              <option value="hy">armenian</option>
              <option value="as">assamese</option>
              <option value="ay">aymara</option>
              <option value="az">azerbaijani</option>
              <option value="bm">bambara</option>
              <option value="eu">basque</option>
              <option value="be">belarusian</option>
              <option value="bn">bengali</option>
              <option value="bho">bhojpuri</option>
              <option value="bs">bosnian</option>
              <option value="bg">bulgarian</option>
              <option value="ca">catalan</option>
              <option value="ceb">cebuano</option>
              <option value="ny">chichewa</option>
              <option value="zh-CN">chinese (simplified)</option>
              <option value="zh-TW">chinese (traditional)</option>
              <option value="co">corsican</option>
              <option value="hr">croatian</option>
              <option value="cs">czech</option>
              <option value="da">danish</option>
              <option value="dv">dhivehi</option>
              <option value="doi">dogri</option>
              <option value="nl">dutch</option>
              <option value="en">english</option>
              <option value="eo">esperanto</option>
              <option value="et">estonian</option>
              <option value="ee">ewe</option>
              <option value="tl">filipino</option>
              <option value="fi">finnish</option>
              <option value="fr">french</option>
              <option value="fy">frisian</option>
              <option value="gl">galician</option>
              <option value="ka">georgian</option>
              <option value="de">german</option>
              <option value="el">greek</option>
              <option value="gn">guarani</option>
              <option value="gu">gujarati</option>
              <option value="ht">haitian creole</option>
              <option value="ha">hausa</option>
              <option value="haw">hawaiian</option>
              <option value="iw">hebrew</option>
              <option value="hi">hindi</option>
              <option value="hmn">hmong</option>
              <option value="hu">hungarian</option>
              <option value="is">icelandic</option>
              <option value="ig">igbo</option>
              <option value="ilo">ilocano</option>
              <option value="id">indonesian</option>
              <option value="ga">irish</option>
              <option value="it">italian</option>
              <option value="ja">japanese</option>
              <option value="jw">javanese</option>
              <option value="kn">kannada</option>
              <option value="kk">kazakh</option>
              <option value="km">khmer</option>
              <option value="rw">kinyarwanda</option>
              <option value="gom">konkani</option>
              <option value="ko">korean</option>
              <option value="kri">krio</option>
              <option value="ku">kurdish (kurmanji)</option>
              <option value="ckb">kurdish (sorani)</option>
              <option value="ky">kyrgyz</option>
              <option value="lo">lao</option>
              <option value="la">latin</option>
              <option value="lv">latvian</option>
              <option value="ln">lingala</option>
              <option value="lt">lithuanian</option>
              <option value="lg">luganda</option>
              <option value="lb">luxembourgish</option>
              <option value="mk">macedonian</option>
              <option value="mai">maithili</option>
              <option value="mg">malagasy</option>
              <option value="ms">malay</option>
              <option value="ml">malayalam</option>
              <option value="mt">maltese</option>
              <option value="mi">maori</option>
              <option value="mr">marathi</option>
              <option value="mni-Mtei">meiteilon (manipuri)</option>
              <option value="lus">mizo</option>
              <option value="mn">mongolian</option>
              <option value="my">myanmar</option>
              <option value="ne">nepali</option>
              <option value="no">norwegian</option>
              <option value="or">odia (oriya)</option>
              <option value="om">oromo</option>
              <option value="ps">pashto</option>
              <option value="fa">persian</option>
              <option value="pl">polish</option>
              <option value="pt">portuguese</option>
              <option value="pa">punjabi</option>
              <option value="qu">quechua</option>
              <option value="ro">romanian</option>
              <option value="ru">russian</option>
              <option value="sm">samoan</option>
              <option value="sa">sanskrit</option>
              <option value="gd">scots gaelic</option>
              <option value="nso">sepedi</option>
              <option value="sr">serbian</option>
              <option value="st">sesotho</option>
              <option value="sn">shona</option>
              <option value="sd">sindhi</option>
              <option value="si">sinhala</option>
              <option value="sk">slovak</option>
              <option value="sl">slovenian</option>
              <option value="so">somali</option>
              <option value="es">spanish</option>
              <option value="su">sundanese</option>
              <option value="sw">swahili</option>
              <option value="sv">swedish</option>
              <option value="tg">tajik</option>
              <option value="ta">tamil</option>
              <option value="tt">tatar</option>
              <option value="te">telugu</option>
              <option value="th">thai</option>
              <option value="ti">tigrinya</option>
              <option value="ts">tsonga</option>
              <option value="tr">turkish</option>
              <option value="tk">turkmen</option>
              <option value="ak">twi</option>
              <option value="uk">ukrainian</option>
              <option value="ur">urdu</option>
              <option value="ug">uyghur</option>
              <option value="uz">uzbek</option>
              <option value="vi">vietnamese</option>
              <option value="cy">welsh</option>
              <option value="xh">xhosa</option>
              <option value="yi">yiddish</option>
              <option value="yo">yoruba</option>
              <option value="zu">zulu</option>
            </select>
          </div>
          <div class="d-grid gap-2">
            <button class="btn btn-primary" type="submit" id="translatebtn">Translate</button>
          </div>
        </form>
      </div>
      <div class="col col-md-4 mt-5">
        <section id="finalvideo">
          <div class="card">
            <div class="card-header">
              Processed video
            </div>
            <div class="card-body">
              <blockquote class="blockquote mb-0">
                <p>A different language is a different vision of life.</p>
                <footer class="blockquote-footer">Federico Fellini<cite title="Source Title">Deep Web</cite>
                </footer>
              </blockquote>
            </div>
          </div>
        </section>
      </div>
    </div>
  </section>
</body>
<script src="{{ url_for('static', filename='js/jquery-3.6.3.min.js') }}" crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"
  integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='js/popper.min.js') }}"
  integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"
  integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
<script>
  $("#mainform").submit(function (e) {
    e.preventDefault();

    $("#translatebtn").prop('disabled', true);
    $("#translatebtn").html("Please wait");

    var formData = new FormData();

    console.log($("#videofile"));
    var originalvideo = $("#videofile")[0].files[0];
    formData.append('languages', $("#languages").val());
    formData.append('videoinput', originalvideo, originalvideo.filename);
    $.ajax({
      type: "POST",
      url: "/videoupload",
      data: formData,
      processData: false,
      contentType: false
    }).done(function (data) {
      $("#translatebtn").prop('disabled', false);
      $("#finalvideo").load("/finalvideo", { filename: data });
    }).always(function () {
      console.log("complete");
    });

  });
</script>

</html>